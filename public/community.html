	<html>
	<head>
		<link rel='stylesheet' type='text/css' href='stylesheets/jquery-ui-1.8.13.custom.css'/>	
		<link rel='stylesheet' type='text/css' href='stylesheets/fullcalendar.css'/>
		<link rel='stylesheet' type='text/css' href='stylesheets/application.css'/>
		<link rel='stylesheet' type='text/css' href='stylesheets/bootstrap.css'/>
		<link rel='stylesheet' type='text/css' href='stylesheets/bootstrap.min.css'/>
		<link rel='stylesheet' type='text/css' href='stylesheets/community.css'/>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
		<!--script type='text/javascript' src='javascripts/jquery-1.5.1.min.js'></script-->

		<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
		 <script src="http://vast-engineering.github.io/jquery-popup-overlay/jquery.popupoverlay.js"></script>


		<!--script type='text/javascript' src='javascripts/jquery-ui-1.8.13.custom.min.js'></script-->	


		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>

		<script type='text/javascript' src='javascripts/fullcalendar.js'></script>

		<script type='text/javascript' src='javascripts/underscore.js'></script>
		<script type='text/javascript' src='javascripts/backbone.js'></script>
		<script type='text/javascript' src='javascripts/application.js'></script>
		<script type='text/javascript' src='javascripts/bootstrap.min.js'></script>
		<script type='text/javascript' src='javascripts/layer.js'></script>
		
	</head>

	<body>
	<div class="page">
		<!-- header div-->
		<div id="cheader">
			<nav class="navbar navbar-default">
				<div class="container-fluid">
					<div>
						<ul class="nav navbar-nav">
							<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">
								Community <span class="caret"></span></a>
								<ul id="community-drop-down" class="dropdown-menu">
									<li><a href="#">Community1</a></li>
									<li><a href="#">Community2</a></li>
									<li><a href="#">Community3</a></li>

								</ul>
							</li>

							<li><a href="#">CSchedule</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">
								TonyDing <span class="caret"></span></a>
								<ul id="users-drop-down" class="dropdown-menu">
									<li><a href="#">Bill Grek</a></li>
									<li><a href="#">Irene</a></li>
									<li><a href="#">Mark</a></li> 
								</ul>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
		<!-- Body div-->
		<div id="cbody">	
			<!-- community list view div -->
			<div class="community-list-view">

				<div class="nav-body"></div>

				<div class="new-community-div">
					<div class="container">
						<div id="new_community_btn"> 
							<div class="createCommunity" style="display:none">Create New Community 
								<div>Community Name</div>
								<input type="text" id="input"/>
								<button class="btn-create">Create</button>
								<button class="cancel-create">Cancel</button>
							</div>
						</div>
					</div> 	
				</div>


				<div class="edit-community-div">
					<div class="container">
						<div id="edit_community_btn"> 
							<div class="editCommunity" style="display:none">Edit Community 
								<div>communityname</div>
								<input type="text" id="edit-input"/>
								<button class="btn-edit-save">save</button>
								<button class="btn-edit-cancel">Cancel</button>
							</div>
						</div>
					</div>
				</div>	

				<div class="remove-community" style="display:none">
					<button class="btn-remove">Remove</button>
				</div>	

				
				<button  class="create-btn" type="button" > + Create new Community</button>
				
			</div>
				
		</div> 
		</div>

		<!-- community show view -->
		<div class="community-show" style="display:none">
			<div class="panel panel-default">
			<div class="panel-heading">
				<div>
					<span id="showName" class="panel-title" style="margin-left:0px"></span>
					<a class="button chatbutton" href="#ommunity-chat-popup">Chat</a>
					<button  id="message-btn">Message</button>
					<button >item1</button>
					<button>item2</button>
					<button>Events</button>
					<button>Agenda</button>
					<button style="margin-left: 700"> < Show All Members</button>
					</div>
				</div>

			</div>

	
	    

			<div id="community-chat-popup" class="overlay">
				<div class="popup">
					<div id="chat-content" class="content">
						<a id="close" href="#">Ã—</a>
					</div>
				</div>
			</div>

			
	
			<div id="chatbox">
				<div class="cchat">
					<h5>CommunityName </h5>
					  <a class="close" href="#"> X </a>
					 
					<div id="displayconversations"style="width:60px"></div>
					<div class="chat-text"><textarea style="border-color: blue"></textarea></div>
				</div>
				<div id="sendchat"><button>Send</button></div>
			
			</div>

            <!-- <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
                demo messages
            </button> -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel">
			  <div class="modal-dialog" role="document">
			    <div class="modal-content">
			      <div class="modal-header">
			        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			        <h4 class="modal-title" id="modalLabel">Community Name	</h4>
			      </div>
			      <div class="modal-body">
			      	<div id="chat-messages">
			      		<ul style="display: -webkit-box">
			      			<li> kalyani: </li>
			      			<li> hello </li>
			      		</ul>
			      	</div>
			      	<div id="recipant-status"></div>
			        <form>
			          <div class="form-group">
			            <label for="message-text" class="control-label">Message:</label>
			            <textarea class="form-control" id="message-text"></textarea>
			          </div>
			        </form>
			      </div>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			        <button type="button" class="btn btn-primary" id= "send_btn">Send message</button>
			      </div>
			    </div>
			  </div>
			</div>
   </div>
		
			

		<script type="text/template" id="community-list-template">
			<% _.each(communities, function(community) { %>
				<div class="community" data-id="<%=community.get('id')%>"> 
					<div class="community-name" contenteditable="true">"<%= htmlEncode(community.get('communityname')) %>" </div>
				</div>
			<% }); %>  
		</script> 

		<script type="text/template" id="community-dropdown-template">
			<% _.each(communities, function(community) { %>
				<li><a href="#">"<%= htmlEncode(community.get('communityname')) %>" </a></li>
				<% }); %>
			<button  class="create-community-dropdown-btn" type="button" > + Create New Community</button>
		</script> 

		<script type="text/template" id="users-dropdown-template">

			<% _.each(loggedInUsers, function(user) { %>
				<li><a href="#">"<%= htmlEncode(user.get('name')) %>" </a></li>
			<% }); %>
		</script> 

		<script type="text/template" id="chats-template">
			<% _.each(chats, function(chat) { %>
				<li><a href="#">"<%= htmlEncode(chat.get('message')) %>" </a></li>
			<% }); %>
		</script> 
     	<script type="text/template" id="message-template">
			<% _.each(msgs, function(message) { %>
				<li> Participants = "<%= htmlEncode(message['participants'].join(",")) %>" </li>
			<% }); %>
		</script>

       <script type="text/template" id="recipent-status-template">
			<% _.each(stats, function(value, key, list) { %>
				<li> Recipant-status "<%= htmlEncode(key)%>":"<%= htmlEncode(value) %>" </li>
			<% }); %>

		</script>

		<script>
			function htmlEncode(value){
				return $('<div/>').text(value).html();
			}

			$.ajaxPrefilter(function (options, originalOptions, jqXHR) {
				var apiLayerRegex = /^https:\/\/api.layer.com\/.*/,
				    jsonFileRegex = /^.*json$/,
				    layerIdentityRegex = /^https:\/\/layer-identity-provider.herokuapp.com\/.*/;

				if(apiLayerRegex.test(options.url) || layerIdentityRegex.test(options.url)){
  
				} else if(jsonFileRegex.test(options.url)){

				}else {
					options.url = 'http://apitest1.servicescheduler.net/' +
						options.url + '?d=IOS&sc=28e336ac6c9423d946ba02dddd6a2632&v=1.4.0&';
				}
			});
		</script>
	   <!--Message Authenticatiion !-->
	   <script type="text/javascript">
		   $(document).ready(function(){
			
				getNonce()

			      // Use the nonce to get an identity token
			      .then(function(nonce) {
			          return getIdentityToken(nonce);
			      })

			      // Use the identity token to get a session
			      .then(function(identityToken) {
			          return getSession(identityToken);
			      })

			      // Store the sessionToken so we can use it in the header for our requests
			      .then(function(sessionToken) {
			          layersample.headers.Authorization =
			              'Layer session-token="' + sessionToken + '"';

			          // Now we can do stuff, like get a list of conversations
			          //return getConversations();
			      })

			});
		</script>

	<script src="app/js/collections/communities.js"></script>
	<script src="app/js/models/community.js"></script>
	<script src="app/js/views/CommunityListView.js"></script>
	<script src="app/js/views/CommunityEditView.js"></script>
	<script src="app/js/views/CommunityView.js"></script>
	<script src="app/js/collections/users.js"></script>
	<script src="app/js/models/user.js"></script>
	<script src="app/js/router.js"></script>
	<script src="app/js/views/UserAddView.js"></script>
	<script src="app/js/views/UserListView.js"></script>
	<script src="app/js/collections/loggedInUsers.js"></script>
	<script src="app/js/models/loggedInUser.js"></script>
	<script src="app/js/models/communityChat.js"></script>
	<script src="app/js/collections/communityChats.js"></script>
	<script src="app/js/models/participant.js"></script>
	<script src="app/js/views/ParticipantView.js"></script>
	<script src="app/js/collections/participants.js"></script>
</body>


</html>

